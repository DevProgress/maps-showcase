<html>

  <head>
    <!-- This header content from https://getbootstrap.com/examples/grid/ -->
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <!-- meta name='viewport' content='width=device-width, initial-scale=1'-->
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <meta name='description' content='Women for Hillary'>
    <link rel='icon' href='assets/img/favicon.ico'>

    <title>Map Showcase - Join Hillary</title>

    <link href='assets/vendor/bootstrap/css/bootstrap.min.css' rel='stylesheet'>

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- https://github.com/Haixing-Hu/bootstrap3-ie10-viewport-bug-workaround -->
    <link href='assets/vendor/ie10-viewport-bug-workaround.css' rel='stylesheet'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src='vendor/html5shiv.min.js'></script>
      <script src='vendor/respond.min.js'></script>
    <![endif]-->

    <link href='assets/css/base.css' rel='stylesheet'>

  </head>

  <body>
    <div class='container-fluid'>
      <div class='row'>
        <div>
          <img id='overlayImage' src='assets/img/static-photo-video.png' title='Click to play the video.' onClick='videoModalController.playVideo()' />
          <span class='glyphicon glyphicon-play-circle centered-icon' onClick='videoModalController.playVideo()'></span>
        </div>
        <!-- video code example, the high-voted answer, not the -1 answer on top:
             http://stackoverflow.com/questions/14616453/image-placeholder-fallback-for-html5-video -->
        <video controls style='width:100%; display:none'>
          <source src='assets/vid/whitehouse-women.mov' type='video/mp4; codecs='avc1.42E01E, mp4a.40.2'' />
          <!-- source src='FOO.webm' type='video/webm; codecs='vp8, vorbis'' / -->
          <img src='assets/img/static-photo-video.png' style='width:100%' title='Your browser does not support the <video> tag'>
        </video>
      </div>

      <div class='middle-gray-bar row'>
        <div class='middle-title col-sm-6 col-xs-12'>
          Women for Hillary
        </div>

        <div class='margin-width col-sm-6 col-xs-12'>
          <button type='button' class='btn btn-danger'>Join us</button>
        </div>
      </div>

      <div class='bottom-gray-bar row'>
        <div class='col-sm-6 padded-half'>
          <div class='bottom-title'>
            About the artist:
          </div>
          <div class='bottom-paragraph'>
            Lorem ipsum dolor sit amet, quo ex platonem hendrerit, per habeo scripta id, et duis albucius comprehensam eam. Civibus voluptatum dissentias vel ad. Ut quem delectus his, ut sed posidonium assueverit. Quo dico tota ex, mea modus eruditi voluptua ea, vel te quas electram ocurreret. Ex eos case laoreet, qui in porro everti honestatis, ad adhuc debitis pri. Nec feugiat tincidunt conclusionemque ea, ius dicam reprehendunt et.
          </div>
        </div>
        <div class='col-sm-6 padded-half'>
          <div class='bottom-title'>
            About the project:
          </div>
          <div class='bottom-paragraph'>
            Lorem ipsum dolor sit amet, quo ex platonem hendrerit, per habeo scripta id, et duis albucius comprehensam eam. Civibus voluptatum dissentias vel ad. Ut quem delectus his, ut sed posidonium assueverit. Quo dico tota ex, mea modus eruditi voluptua ea, vel te quas electram ocurreret. Ex eos case laoreet, qui in porro everti honestatis, ad adhuc debitis pri. Nec feugiat tincidunt conclusionemque ea, ius dicam reprehendunt et.
          </div>
        </div>
      </div>
    </div>
    <script src='assets/js/map.js'></script>
    <script src='assets/js/modal-controller.js'></script>
    <script src='assets/js/video-modal-controller.js'></script>

    <script src="https://code.jquery.com/jquery-3.1.0.js"   integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="   crossorigin="anonymous"></script>

    <script>
    /* http://stackoverflow.com/questions/18011099/pinch-to-zoom-using-hammer-js */
    function hammerIt(elm) {
      hammertime = new Hammer(elm, {});
      hammertime.get('pinch').set({
          enable: true
      });

      var posX = 0,
          posY = 0,
          scale = 1,
          last_scale = 1,
          last_posX = 0,
          last_posY = 0,
          max_pos_x = 0,
          max_pos_y = 0,
          transform = "",
          el = elm;

      hammertime.on('doubletap pan pinch panend pinchend', function(ev) {
          if (ev.type == "doubletap") {
              transform =
                  "translate3d(0, 0, 0) " +
                  "scale3d(2, 2, 1) ";
              scale = 2;
              last_scale = 2;
              try {
                  if (window.getComputedStyle(el, null).getPropertyValue('-webkit-transform').toString() != "matrix(1, 0, 0, 1, 0, 0)") {
                      transform =
                          "translate3d(0, 0, 0) " +
                          "scale3d(1, 1, 1) ";
                      scale = 1;
                      last_scale = 1;
                  }
              } catch (err) {}
              el.style.webkitTransform = transform;
              transform = "";
          }

          //pan
          if (scale != 1) {
              posX = last_posX + ev.deltaX;
              posY = last_posY + ev.deltaY;
              max_pos_x = Math.ceil((scale - 1) * el.clientWidth / 2);
              max_pos_y = Math.ceil((scale - 1) * el.clientHeight / 2);
              if (posX > max_pos_x) {
                  posX = max_pos_x;
              }
              if (posX < -max_pos_x) {
                  posX = -max_pos_x;
              }
              if (posY > max_pos_y) {
                  posY = max_pos_y;
              }
              if (posY < -max_pos_y) {
                  posY = -max_pos_y;
              }
          }


          //pinch
          if (ev.type == "pinch") {
              scale = Math.max(.999, Math.min(last_scale * (ev.scale), 4));
          }
          if(ev.type == "pinchend"){last_scale = scale;}

          //panend
          if(ev.type == "panend"){
          last_posX = posX < max_pos_x ? posX : max_pos_x;
          last_posY = posY < max_pos_y ? posY : max_pos_y;
          }

          if (scale != 1) {
              transform =
                  "translate3d(" + posX + "px," + posY + "px, 0) " +
                  "scale3d(" + scale + ", " + scale + ", 1)";
          }

          if (transform) {
              el.style.webkitTransform = transform;
          }
      });
    }


    $( document ).ready(function() {
      var mapDiv = document.getElementById('map-container-outer');
      hammerIt(mapDiv)

    });
    </script>
});
  </body>
  <script src='assets/js/video-modal-controller.js'></script>
</html>
